<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lv.mapper.ItemMapper" >
    <resultMap id="BaseResultMap" type="com.lv.domain.Item" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 08 09:49:09 GMT+08:00 2016.
        -->
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="item_name" property="itemName" jdbcType="VARCHAR" />
        <result column="person" property="person" jdbcType="VARCHAR" />
        <result column="item_no" property="itemNo" jdbcType="VARCHAR" />
        <result column="image" property="image" jdbcType="VARCHAR" />
        <result column="status" property="status" jdbcType="VARCHAR" />
        <result column="date_created" property="dateCreated" jdbcType="DATE" />


    </resultMap>



    <select id="selectItem" parameterType="java.util.HashMap" resultType="java.util.HashMap" >
        select id, item_name as itemName, person, image,item_no as itemNo, status, date_created as dateCreated from item
        <where>
            <if test="name != null ">
                and  item_name like CONCAT('%', trim(#{name, jdbcType=VARCHAR}), '%')
            </if>

            <if test="itemNo != null ">
                and  item_no like CONCAT('%', trim(#{itemNo, jdbcType=VARCHAR}), '%')
            </if>
        </where>
        ORDER by id desc limit #{offset}, #{pageSize}
    </select>




    <select id="count" parameterType="java.util.HashMap" resultType="java.lang.Integer" >
        select count(*) from item
        <where>
            <if test="name != null ">
                and  item_name like CONCAT('%', trim(#{name, jdbcType=VARCHAR}), '%')
            </if>

            <if test="itemNo != null ">
                and  item_no like CONCAT('%', trim(#{itemNo, jdbcType=VARCHAR}), '%')
            </if>
        </where>
    </select>
</mapper>